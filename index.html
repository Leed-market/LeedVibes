<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LeedVibes</title>
    <link rel="stylesheet" href="css/normalize.css" media="all">
    <link rel="stylesheet" href="css/style.css" media="all">
</head>
<body>
    {if="($configurationManager->get('articleDisplayAnonymous')=='1') || ($myUser!=false)"}
        {function="Plugin::callHook("menu_pre_folder_menu", array(&$myUser))"}
        <aside>
            {if="!$myUser"}
                <form action="action.php?action=login" method="POST">
                    <input type="text" name="login" placeholder="{function="_t('LOGIN')"}"/>
                    <input type="password" name="password" placeholder="{function="_t('PASSWORD')"}"/>
                    <input type="submit" value="__Ok__">
                    <label class="rememberMe">
                        <input type="checkbox" name="rememberMe">
                        <span>{function="_t('REMEMBER_ME')"}</span>
                    </label>
                </form>
            {else}
                <span>{function="_t('IDENTIFIED_WITH',array('<span>'.$myUser->getLogin().'</span>'))"} </span><button onclick="window.location='action.php?action=logout'">{function="_t('DISCONNECT')"}</button>
            {/if}
            <ul>
                <li><a href="./">All feed</a></li>
                {loop="folders"}
                    {$feeds=""}
                    {if="isset($allFeedsPerFolder[$value->getId()])"}
                        {$feeds=$allFeedsPerFolder[$value->getId()]}
                    {/if}
                    {if="isset($allEvents[$value->getId()])"}
                        {$unreadEventsForFolder=$allEvents[$value->getId()]}
                    {/if}
                    <li>
                        <button class="js-toggle-button">{if="!$value->getIsopen()"}&#9656;{else}&#9662;{/if}</button>
                        {function="Plugin::callHook("menu_pre_folder_link", array(&$value))"}
                        <a href="index.php?action=selectedFolder&amp;folder={$value->getId()}" title="{function="_t('READ_FOLDER_ITEMS')"}">{function="htmlentities($value->getName())"}</a>
                        {function="Plugin::callHook("menu_post_folder_link", array(&$value))"}
                        <ul class="js-toggle-item{if="!$value->getIsopen()"} hidden{/if}" data-folder-id="{$value->getId()}">
                            {if="count($feeds)!=0"}
                                {loop="feeds"}
                                    <li>
                                        {function="Plugin::callHook("menu_pre_feed_link", array(&$value))"}
                                        <a href="index.php?action=selectedFeed&amp;feed={$value2['id']}" title="{function="htmlentities($value2['url'])"}">{function="htmlentities(Functions::truncate($value2['name'],37))"}</a>
                                        {function="Plugin::callHook("menu_post_feed_link", array(&$value))"}
                                    </li>
                                {/loop}
                            {/if}
                        </ul>
                    </li>
                    {$unreadEventsForFolder=0}
                {/loop}
            </ul>
        </aside>
        {function="Plugin::callHook("menu_post_folder_menu", array(&$myUser))"}
        
        <section>
            {include="article"}
        </section>
        <script src="js/jquery-1.10.2.min.js"></script>
        <script src="js/script.js"></script>
    {else}
        <section>
            <h3>{function="_t('YOU_MUST_BE_LOGGED')"}</h3>
            <p>{function="_t('IF_ADMIN_THEN_CONFIG')"}</p>
        </section>
    {/if}
</body>
</html>
